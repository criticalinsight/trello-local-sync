name = "trello-local-sync"
main = "src/worker.ts"
compatibility_date = "2024-09-23"
account_id = "c61fd30bce61d2d26de34db53b001e3d"

# Custom domain routes
routes = [
    { pattern = "work.moecapital.com", custom_domain = true },
    { pattern = "moecapital.com", custom_domain = true }
]

[durable_objects]
bindings = [
    { name = "BOARD_DO", class_name = "BoardDO" },
    { name = "RESEARCH_DO", class_name = "ResearchDO" },
    { name = "CONTENT_DO", class_name = "ContentDO" }
]



[[migrations]]
tag = "v1"
new_sqlite_classes = ["BoardDO"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["ResearchDO"]

[observability]
enabled = true
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true

[assets]
directory = "./dist"
binding = "ASSETS"

[[r2_buckets]]
binding = "MEDIA_BUCKET"
bucket_name = "work-media"

# Secret: GEMINI_API_KEY
# Set via: wrangler secret put GEMINI_API_KEY
# Then paste your Gemini API key when prompted

[[migrations]]
tag = "v3"
new_sqlite_classes = ["ContentDO"]

